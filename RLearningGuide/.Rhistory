scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.55), breaks=round(c(.75,8/9,1,9/8,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate applying 210 days before semester",
y="odds of enrolling"
)
g2
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,8/9,1,9/8,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate applying 210 days before semester",
y="odds of enrolling"
)
g2
1/1.15
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate applying 210 days before semester",
y="odds of enrolling"
)
g2
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to\ncandidate applying 210 days before semester",
y="odds of enrolling"
)
g2
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to\ncandidate who applies 210 days before semester",
y="odds of enrolling"
)
g2
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate who applies\n210 days before semester",
y="odds of enrolling"
)
g2
library(ggplot2)
gpa <- seq(2.5,4.0,.01)
pred <- log(gpa)*-2.0038
odds <- exp(pred) / exp(log(3.0)*-2.0038)
g <- ggplot(data=data.frame(gpa,odds),aes(x=gpa,y=odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=round(seq(7/3,4,1/3),2)) +
scale_y_continuous(limits=c(.49,2.1),breaks=round(c(.5,2/3,.8,1,1.25,1.5,2),2),trans="log") +
labs (
title="odds of enrolling relative to candidate\nwith 3.0 gpa",
y="odds of enrolling"
)
g
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate\nwho applies 210 days before semester",
y="odds of enrolling"
)
g2
gpa <- seq(2.5,4.0,.01)
pred <- log(gpa)*-2.0038
odds <- exp(pred) / exp(log(3.0)*-2.0038)
g <- ggplot(data=data.frame(gpa,odds),aes(x=gpa,y=odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=round(seq(7/3,4,1/3),2)) +
scale_y_continuous(limits=c(.49,2.1),breaks=round(c(.5,2/3,.8,1,1.25,1.5,2),2),trans="log") +
labs (
title="odds of enrolling relative to candidate who applies\nwith a 3.0 gpa",
y="odds of enrolling"
)
g
ggsave('tmp/pte_gpa.pdf')
coef <- -0.0180
days <- seq(0,270,1)
pred <- days^(.5)*coef
odds <- exp(pred)/exp((7*30)^(.5)*coef)
days <- -1*days
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate\nwho applies 210 days before semester",
y="odds of enrolling"
)
g2
g
source('~/.active-rstudio-document')
library(ggplot2)
gpa <- seq(2.5,4.0,.01)
pred <- log(gpa)*-2.0038
odds <- exp(pred) / exp(log(3.0)*-2.0038)
g <- ggplot(data=data.frame(gpa,odds),aes(x=gpa,y=odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=round(seq(7/3,4,1/3),2)) +
scale_y_continuous(limits=c(.49,2.1),breaks=round(c(.5,2/3,.8,1,1.25,1.5,2),2),trans="log") +
labs (
title="odds of enrolling relative to candidate who applies\nwith a 3.0 gpa",
y="odds of enrolling"
)
g
ggsave('tmp/pte_gpa.pdf')
coef <- -0.0180
days <- seq(0,270,1)
pred <- days^(.5)*coef
odds <- exp(pred)/exp((7*30)^(.5)*coef)
days <- -1*days
g2 <- ggplot(data=data.frame(days,odds),aes(x=days,odds)) + geom_line(size=1.2) +
geom_hline(yintercept=1,linetype=2,color="gray36") +
scale_x_continuous(breaks=seq(-270,0,30), labels=seq(270,0,-30)) +
scale_y_continuous(limits=c(.75,1.34), breaks=round(c(.75,1/1.15,1,1.15,4/3),2), trans="log") +
labs (
title="odds of enrolling relative to candidate\nwho applies 210 days before semester",
y="odds of enrolling"
)
g2
ggsave('tmp/pte_daysbefore.pdf')
rooms <- seq(101,808,1)
selected <- seq(102,808,4)
selected
tail(selected,8)
selected <- seq(102,808,5)
tail(selected,8)
c(1:8)
lapply(c(1:8),function(x){100*x+c(1:8)}
)
sapply(c(1:8),function(x){100*x+c(1:8)})
unlist(sapply(c(1:8),function(x){100*x+c(1:8)}))
as.vector(unlist(sapply(c(1:8),function(x){100*x+c(1:8)})))
rooms <- as.vector(unlist(sapply(c(1:8),function(x){100*x+c(1:8)})))
selected <- rooms[seq(2,808,5)]
selected
selected <- NA
selected <- rooms[seq(2,808,5)]
selected <- rooms[seq(2,length(rooms),5)]
selected
80/98
800/98
2/8
.2/8
80/98
setwd("/Users/bader/work/Data/Census/DCMetro/DCAndBorderingCounties/")
dcarea <- read.delim("R10835953_SL140.txt")
View(dcarea)
pop <- dcarea$Total.Population
sum(pop)
pop <- as.numeric(as.character(dcarea$Total.Population))
sum(pop)
sum(pop,rm.na=TRUE)
?sum
sum(pop,na.rm =TRUE)
names(dcas)[names(dcas)=="Male..18.to.24.Years"]
names(dcas)[names(dcarea)=="Male..18.to.24.Years"]
names(dcarea)[names(dcarea)=="Male..18.to.24.Years"]
names(dcarea)=="Male..18.to.24.Years"
c(1:200)[names(dcarea)=="Male..18.to.24.Years"]
c(1:200)[names(dcarea)=="Male..85.Years.and.over"]
c(62:69,1:2)
male.start <- c(1:200)[names(dcarea)=="Male..18.to.24.Years"]
male.end   <- c(1:200)[names(dcarea)=="Male..85.Years.and.over"]
female.start <- c(1:200)[names(dcarea)=="Female..18.to.24.Years"]
female.end   <- c(1:200)[names(dcarea)=="Female..85.Years.and.over"]
pop.data <- dcarea[,c(male.start:male.end,female.start:female.end)]
View(pop.data)
male.start <- c(1:200)[names(dcarea)=="Male..18.to.24.Years"]
male.end   <- c(1:200)[names(dcarea)=="Male..85.Years.and.over"]
female.start <- c(1:200)[names(dcarea)=="Female..18.to.24.Years"]
female.end   <- c(1:200)[names(dcarea)=="Female..85.Years.and.over"]
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- as.numeric(as.charcter(pop.data))
pop.data <- as.numeric(as.character(pop.data))
View(pop.data)
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
pop.data <- as.numeric(as.character(pop.data))
class(pop.data)
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
View(pop.data)
pop.data$tot.18plus <- apply(pop.data,1,sum)
pop.data$tot.18plus <- lapply(pop.data,1,sum)
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
pop.data$tot.18plus <- lapply(pop.data,1,sum)
pop.data$tot.18plus <- lapply(pop.data,sum)
View(pop.data)
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
pop.data$tot.18plus <- rowsum(pop.data)
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
pop.data$tot.18plus <- rowSums(pop.data)
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
tot.18plus <- rowSums(pop.data)
class(tot.18plus)
sum(tot.18plus)
setwd("/Users/bader/work/Data/Census/DCMetro/DCAndBorderingCounties/")
dcarea <- read.delim("R10835953_SL140.txt")
male.start <- c(1:200)[names(dcarea)=="Male..18.to.24.Years"]
male.end   <- c(1:200)[names(dcarea)=="Male..85.Years.and.over"]
female.start <- c(1:200)[names(dcarea)=="Female..18.to.24.Years"]
female.end   <- c(1:200)[names(dcarea)=="Female..85.Years.and.over"]
pop.data <- dcarea[2:nrow(dcarea),c(male.start:male.end,female.start:female.end)]
pop.data <- apply(pop.data,2,FUN=function(x){as.numeric(as.character(x))})
tot.18plus <- rowSums(pop.data)
sum(tot.18plus)
zillow <- read.csv("http://files.zillowstatic.com/research/public/Metro/Metro_MedianValuePerSqft_AllHomes.csv")
View(zillow)
dcas <- read.csv(https://mikebader:(1)Tt3rpR06@61y:hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv)
dcas <- read.csv("https://mikebader:(1)Tt3rpR06@61y:hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://mikebader:(1)Tt3rpR06@61y@hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://mikebader:(1)Tt3rpR06\@61y@hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://mikebader:(1)Tt3rpR06\\@61y@hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://socy625:R3duc33rr0r@hg.mikebader.net/private/dcas2016/file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://socy625:R3duc33rr0r@https://socy625:R3duc33rr0r@hg.mikebader.net/private/dcas2016/raw-file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://socy625:R3duc33rr0r@https://socy625:R3duc33rr0r@hg.mikebader.net/private/dcas2016/raw-file/tip/Dataset/DCAS_2016_weighted.csv")
dcas <- read.csv("https://socy625:R3duc33rr0r@hg.mikebader.net/private/dcas2016/raw-file/tip/Dataset/DCAS_2016_weighted.csv")
plot(cars)
knitr::opts_chunk$set(echo = TRUE)
my_state <- "Maryland"
"I live in " + my_state
my_state <- "Maryland"
paste0("I live in ",my_state)
my_state <- "Maryland"
paste("I live in",my_state)
my_state <- Maryland
my_states
my_states <- c("Colorado","Washington","Maryland","Texas","Michigan","New York","Pennsylvania")
for(state in my_states) {
paste("I lived in",state)
}
for(state in my_states) {
print(paste("I lived in",state))
}
dcas <- read.csv("~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv")
View(dcas)
rm(list=ls())
View(dcas)
knitr::opts_chunk$set(echo = TRUE)
N_states <- 50
N_states * 2
my_state <- "Maryland"
paste("I live in",my_state)
my_state <- "a galaxy far, far away"
paste("I live in",my_state)
my_state <- Maryland
my_states <- c("Colorado","Washington","Maryland","Texas",
"Michigan","New York","Pennsylvania")
for(state in my_states) {
print(paste("I lived in",state))
}
dcas <- read.csv("~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv")
View(dcas)
---
title: "R Learning Guide"
author: "Mike Bader"
date: "February 2018"
output:
html_document: default
md_document:
variant: markdown
pdf_document:
keep_tex: yes
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/work/Teaching/Courses/ResearchPracticum/RLearningGuide/")
```
Welcome to R!
=============
You are embarking on an exciting adventure to learn extremely powerful software that you can download **for free**.
What is R?
----------
Let's start by describing this powerful tool to start. R is both:
-   A statistical computing software
-   A full-fledged programming language
If you have learned other statistical software, you might wonder why you would want to learn another. Especially because many find that R has a steeper learning curve than these software programs.
Difference from Other Statistical Software
------------------------------------------
Other statistical software like Stata, SPSS, and SAS do one thing: they
take a table (spreadsheet) of data and statistical commands to analyze
that data.
R can do this, too. But R can do many more things because R is an entire
programming language. It has many different types of data that you can
use. You can put in a table (called a “data frame” in R-speak), but you
have lots of other types of data that you can use. It offers much more
flexibility than other statistical software.
BUT, that flexibility comes at the cost of simplicity.
Why R?
------
So why make you learn something that’s harder than what you have already
learned?
-   R is open source (free as in speech), which means that many different people can help
extend the language to do common tasks or specialized analysis
-   R is the future of statistical software; employers will be
increasingly moving to R
-   Lest we forget, let us remember that R is **free** (as in beer);
you can use it on any computer and with
any employer. Many of you will be working for employers that might
not have large budgets; learning free software means that you will
always be able to use it.
----------- --------------- ----------------------------
SAS[^1]          \$9,720.00 + Windows only
SPSS[^2]      \$99.00/month + \$237.00/month add-ons
Stata[^3]        \$1,695.00 + \$300 for large datasets
R                    \$0.00
----------- --------------- ----------------------------
[^1]: For SAS Analytics Pro
<https://www.sas.com/en_us/software/analytics-pro.html>; January 20,
2018
[^2]: <https://www.ibm.com/products/spss-statistics/pricing>; January
20, 2018
[^3]: Stata 15 government & nonprofit pricing
<https://www.stata.com/order/new/gov/single-user-licenses/dl/>;
January 20, 2018
We’re talking about a substantial amount of money!
Getting R
=========
Download R
----------
I hope that I have convinced you to at least try R at this point.
That means you will need to get this amazing, powerful, and
cost-effective software. You will need to download R. To do so
Go to <https://www.r-project.org/> and look
for the link that says “Download.” After you do that, you will be sent
to a list of mirrors (servers that distribute R so that no single server
gets overloaded). Find the United States and download one from that
lists (I use the [National Institute for Computational Sciences in Oak
Ridge, TN](https://mirrors.nics.utk.edu/cran/)).
RStudio
-------
If you open up R after downloading it, you will see that it gives you
*nothing* except a command line to type in commands to be run. This is
not ideal and would make R *really* difficult if that was the only way
with which you could interact with R.
That is where RStudio comes in. RStudio is an *Integrated Development
Environment (IDE)* for R. That means that RStudio gives you a window
into R–basically it acts as a gopher between you and R.
In acting as a gopher, it provides a nice *graphical user interface
(GUI)* that makes R a lot easier to use.
There are four different windows in RStudio that you will use:
Source (ctrl-1)
:   This is where you keep your scripts where you do your analysis.
These are the same as <span>`.do`</span> files in Stata.
Console (ctrl-2)
:   This is where you can type commands directly to tell R what to do.
You should use this sparingly because only entering commands in the
console makes it difficult to reproduce what you have done. My
advice: work in the source window, then copy/paste into the console
(or source the command directly by pressing ‘ctrl-Enter’—we’ll get
to that)
Environment
:   This window shows you all of the objects that are currently
available in R. Remember how I told you that R can hold different
types of data? This is where you will find all of them. A second tab
in that window contains your history, which contains the list of
commands that you have entered into the console.
Viewer
:   This window is where you will view help files and plots that you
make (you can view a whole bunch of other stuff down there, but
those are for more advanced applications).
To get RStudio, you will go to <https://www.rstudio.com/> and then find
the link for RStudio and download. This software is also free.
Getting Help
------------
As you go on this adventure, you will likely need help along the way. There are a couple of great resources on the web to help you learn just about everything that you would like to do.
[Stack Overflow](https://stackoverflow.com/questions/tagged/r)
:   provides user-generated answers to questions posed in forums. Good answers tend to filter to the top of the list based on an ingenuous ranking system of votes and points.
[Rseek](https://rseek.org/)
:   gives Google-like search functionality to find R-related material.
[R-bloggers](https://www.r-bloggers.com/)
:   is a blog with posts that cover tutorials and code for basic to advanced material
First Steps with R
==================
What is a Variable?
-------------------
In R, *variables* differ from variables in other statistics programs. In Stata or SPSS, variables represent columns in a dataset. In R, variables can take on many different forms: vectors (a row of numbers or letters), datasets (called "dataframes"), scalars (a single number or letter), among many others ([here](https://www.statmethods.net/input/datatypes.html) is a list of different R objects).
**Numeric.** We will "assign" variables in R using the operator `<-`. If we want to create a variable containing the number of states in the United States (50) to a variable named `N_states` for [N]umber of [states][^python] we might write:
```{r variables_define}
N_states <- 50
```
Any time we write `N_states`, R will read that as "50". So if I type `N_states * 2` into the console, I will get:
```{r variables_show_contents}
N_states * 2
```
[^python]: R reads periods `.` as spaces, like underscores. Those who code in Python will likely find this convention frustrating since Python uses the dot notation to identify methods or properties of an object's instance. In my own coding, I now try to use underscores rather than dots so that I do not continue to confuse myself, even though dots are conventional in R.
**Strings.** We can also assign strings, or in R-speak "characters", to variables. I can create a variable called `my_state` that contains the string `Maryland` in it. We can then do things with that variable like make parts of sentences.
```{r variables_define_string}
my_state <- "Maryland"
paste("I live in",my_state)
```
Here we have used the `paste()` *function* to glue the string `"I live in"` to the string stored in `my_state`, which R reads as `"Maryland"`. If you wanted to change the value in your state, you would only need to change the value of `my_state`, enclosed in quotes, to represent your state. As a matter of fact, you don't even need to enter a state into the variable `my_state`, you can enter any value you want. For example:
```{r variables_redefine_string}
my_state <- "a galaxy far, far away"
paste("I live in",my_state)
```
This works because R doesn't care what string `my_state` actually contains. Now that I have entered `"a galaxy far, far away"`, R will just look for the name `my_state` and substitute the value stored in that variable. You should note that *variable names are for humans* to make sense of what's contained within them. R does not care what you name a variable, it just cares what you assign to the variable of that name.
<div class="warningblock">
**Watch out:** One common error is to forget to enclose words in quotes that you want to use as strings. R will "throw" an error if you type the following:
```{r variables_no_quotes, error=TRUE}
my_state <- Maryland
```
You will see that the console tells you "Error: object 'Maryland' not found". That means that R looked for a variable (that's the object its referring to) called `Maryland`, but it couldn't find one. In order for the string of letter M-a-r-y-l-a-n-d to be read as the string "Maryland", you need to enclose it in quotes.
</div>
**Vectors.** Vectors are another useful type of object in R. We create these by "combining" elements, separated by commas, into a single object. One of the most annoying aspects of R is that you must use a function, `combine()` to create vectors. Fortunately, because we use that function so often, it has an abbreviation: `c()`.[^otherlangs] Let's say that I want to create a vector containing the states in which I have lived. I would write:
```{r variables_vector}
my_states <- c("Colorado","Washington","Maryland","Texas",
"Michigan","New York","Pennsylvania")
```
Anytime I type `my_states`, it will return the vector containing this set of string values. With a "for loop" we could do the following (don't worry about following the for-loop, just see that I can operate on each element of the vector):
```{r variables_vector_loop}
for(state in my_states) {
print(paste("I lived in",state))
}
```
Note that when I initialized the variable `my_states`, I split the code across two lines. Normally R would execute each line as a command. R, however, allows you to split lines inside of parentheses and it won't attempt to execute the command until it finds the closing parens. This allows you to keep your code in a reasonable width, which improves legibility (generally try to keep each line under 80 characters in width).
[^otherlangs]: For those unfamiliar with other programming languages, this might not seem weird. For those of us who program in other languages, for example Python, we get used to typing `my_list = [1,2,3,4]`. Creating a similar object in R requires that we type `my_list = c(1,2,3,4)`. I usually introduce errors in my code when I switch back to R from another language because I try to type `my_list = (1,2,3,4)` and end up with an error.
Open a Dataset
--------------
None of this provides much excitement. After all, if you are reading this tutorial, you likely want to analyze data. In order to analyze data, we need to open a dataset to analyze.
**Data frames.** Remember that R stores every object with a variable name: this includes datasets! As I mentioned above, R names datasets "data frames". That means that we will load the data into a variable and then operate on that variable to do things with the data. This differs substantially from Stata or SPSS where you will load a single data set and then the software will assume that you are refering to that dataset when you send commands to the program.
For this example, we will use data from the 2016 DC Area Survey (DCAS2016), a survey of residents in multiracial neighborhoods in Washington, DC and the surrounding jurisdictions. The data are available at https://hg.mikebader.net/private/dcas2016/raw-file/tip/Dataset/DCAS_2016_weighted.csv (email me to get the username and password if you would like to download the data).
The file contains the data in *comma separated values (csv)* format. The first row contains "variable" (in the sense of data variables, not in the R sense) names separated by commas. Each of the following rows contains the responses for a single respondent with each reponse separated by a comma.
Comma separated values can always be read, which gives them a huge advantage over files saved in a format that cannot be read. It's like saving a text file on your computer versus a Microsoft Word document. It seems fine because of Word's ubiquity. But I'm old enough to remember when WordPerfect was the word processor that everyone used. Good luck getting one of those files to open now.
I digress. We have two options for data that are available on the web: we can download the data and open the file from our machine or we can open the data directly from the internet. My advice would be this: if you a dataset will not change, then download a copy so that you can use it at any time. If a dataset will change, for example by getting new data appended as they become available, it's probably better to open the data from the internet.
**Loading data from a file on your computer (also known as loading from a 'local file').** To be able to open the data, you will have to tell R where you have stored it on your computer. To do this, you will need to know a) the directory in which you stored it and b) the file name. Every operating system stores files into different directories. You probably know these as folders when you go to "My Computer" on a PC or "Macintosh HD" on a Mac (if you use Linux, I will assume that you know all of this and you can probably tell me how I've gotten this wrong). The folders just provide a visual representation of directories.
To open the data, you will use the function `read.csv()`. The function takes one required *argument*, the file name to be read. R will then convert the text in the .csv file into a dataframe that we can manipulate and analyze. Remember, though, that *we need to assign the dataset to a variable in R!*
I downloaded my data into a drive called "~/work/Data/DCAS/dcas2016/sourceData/" and I kept the original file name, "DCAS_2016_weighted.csv", and want to store the data in an object called `dcas`. So, I would write:
```{r data_read_csv}
dcas <- read.csv("~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv")
```
Let’s break what we did here into its parts:
-   <span>`dcas`</span>\
This is the object that holds the dataset that we read from the file. If we
ever want to refer to the dataset, we would need to reference its
name, <span>`dcas`</span>, first. One of the really cool things
about R is that you can have multiple datasets open at the same
time; that means, however, that you have to refer to the dataset
that you want to use by its name.
-   <span>`<-`</span>\
Just as with the variables above, this means “assign” the contents of the file to the variable name `dcas`.
-   <span>`read.csv()`</span>\
This is the *function*. You can tell that it is a function because it
has parentheses after it. Inside the parentheses are different
*arguments* that you pass to the function. A function will then take
those options and do something with them.
-   <span>`"~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv"`</span>\
is a file that holds the data that we want. Notice that we must put the file name in quotations. Otherwise R would look for an object of the name `~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv` (which would fail miserably).
R did not complain to us, so that's a good sign. But, the data might not have loaded correctly, so I always like to check. You can do this in two ways if you are using RStudio. The first, and my preferred way, to check the data is to use the `View()` function, which will show you the contents of the object in the source window.
```{r data_view, echo=TRUE,eval=FALSE}
View(dcas)
```
You can see the result of the `View(dcas)` command in the image below.
![Screen shot of DCAS data](../images/variables_and_data/View_function_screenshot.png)
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/work/Teaching/Courses/ResearchPracticum/RLearningGuide/")
```{r data_head, R.options=list(max.print=18)}
?knitr
?head
N_states * 2
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/work/Teaching/Courses/ResearchPracticum/RLearningGuide/")
N_states <- 50
N_states * 2
my_state <- "Maryland"
paste("I live in",my_state)
my_state <- "a galaxy far, far away"
paste("I live in",my_state)
my_state <- Maryland
my_states <- c("Colorado","Washington","Maryland","Texas",
"Michigan","New York","Pennsylvania")
for(state in my_states) {
print(paste("I lived in",state))
}
dcas <- read.csv("~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv")
knitr::include_graphics("images/variables_and_data/View_function_screenshot.png")
head(dcas)
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/work/Teaching/Courses/ResearchPracticum/RLearningGuide/")
N_states <- 50
N_states * 2
my_state <- "Maryland"
paste("I live in",my_state)
my_state <- "a galaxy far, far away"
paste("I live in",my_state)
my_state <- Maryland
my_states <- c("Colorado","Washington","Maryland","Texas",
"Michigan","New York","Pennsylvania")
for(state in my_states) {
print(paste("I lived in",state))
}
dcas <- read.csv("~/work/Data/DCAS/dcas2016/Dataset/DCAS_2016_weighted.csv")
